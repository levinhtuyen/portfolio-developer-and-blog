import{s as S,g as x,e as A,$ as L,x as J,A as V,U as K,z as N,F as Z,B as _,y as ee,X as k,q as te}from"./entry.7f708710.js";import{o as h,u as F,t as le,i as B,E as ae,A as E,T as oe,a as j,l as ne,N as z}from"./open-closed.410a1b2c.js";import{a as ue,b as ie,h as re,f as se,u as ve,s as de,O as pe,o as g}from"./keyboard.ac7d6403.js";function fe(e,n,a){let s=S(a==null?void 0:a.value),u=x(()=>e.value!==void 0);return[x(()=>u.value?e.value:s.value),function(l){return u.value||(s.value=l),n==null?void 0:n(l)}]}let U=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function q(e){var n,a;let s=(n=e.innerText)!=null?n:"",u=e.cloneNode(!0);if(!(u instanceof HTMLElement))return s;let l=!1;for(let f of u.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))f.remove(),l=!0;let t=l?(a=u.innerText)!=null?a:"":s;return U.test(t)&&(t=t.replace(U,"")),t}function ce(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let a=e.getAttribute("aria-labelledby");if(a){let s=a.split(" ").map(u=>{let l=document.getElementById(u);if(l){let t=l.getAttribute("aria-label");return typeof t=="string"?t.trim():q(l).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return q(e).trim()}function be(e){let n=S(""),a=S("");return()=>{let s=h(e);if(!s)return"";let u=s.innerText;if(n.value===u)return a.value;let l=ce(s).trim().toLowerCase();return n.value=u,a.value=l,l}}function H(e){return[e.screenX,e.screenY]}function me(){let e=S([-1,-1]);return{wasMoved(n){let a=H(n);return e.value[0]===a[0]&&e.value[1]===a[1]?!1:(e.value=a,!0)},update(n){e.value=H(n)}}}function ge(e){throw new Error("Unexpected object: "+e)}var y=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(y||{});function xe(e,n){let a=n.resolveItems();if(a.length<=0)return null;let s=n.resolveActiveIndex(),u=s??-1;switch(e.focus){case 0:{for(let l=0;l<a.length;++l)if(!n.resolveDisabled(a[l],l,a))return l;return s}case 1:{u===-1&&(u=a.length);for(let l=u-1;l>=0;--l)if(!n.resolveDisabled(a[l],l,a))return l;return s}case 2:{for(let l=u+1;l<a.length;++l)if(!n.resolveDisabled(a[l],l,a))return l;return s}case 3:{for(let l=a.length-1;l>=0;--l)if(!n.resolveDisabled(a[l],l,a))return l;return s}case 4:{for(let l=0;l<a.length;++l)if(n.resolveId(a[l],l,a)===e.id)return l;return s}case 5:return null;default:ge(e)}}function Q(e={},n=null,a=[]){for(let[s,u]of Object.entries(e))W(a,X(n,s),u);return a}function X(e,n){return e?e+"["+n+"]":n}function W(e,n,a){if(Array.isArray(a))for(let[s,u]of a.entries())W(e,X(n,s.toString()),u);else a instanceof Date?e.push([n,a.toISOString()]):typeof a=="boolean"?e.push([n,a?"1":"0"]):typeof a=="string"?e.push([n,a]):typeof a=="number"?e.push([n,`${a}`]):a==null?e.push([n,""]):Q(a,n,e)}function he(e,n){return e===n}var ye=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ye||{}),Oe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Oe||{}),Se=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Se||{});function Le(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Y=Symbol("ListboxContext");function C(e){let n=te(Y,null);if(n===null){let a=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,C),a}return n}let Pe=A({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>he},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:n,attrs:a,emit:s}){let u=S(1),l=S(null),t=S(null),f=S(null),c=S([]),b=S(""),m=S(null),i=S(1);function v(o=r=>r){let r=m.value!==null?c.value[m.value]:null,d=pe(o(c.value.slice()),O=>h(O.dataRef.domRef)),p=r?d.indexOf(r):null;return p===-1&&(p=null),{options:d,activeOptionIndex:p}}let R=x(()=>e.multiple?1:0),[w,D]=fe(x(()=>e.modelValue),o=>s("update:modelValue",o),x(()=>e.defaultValue)),T=x(()=>w.value===void 0?F(R.value,{1:[],0:void 0}):w.value),P={listboxState:u,value:T,mode:R,compare(o,r){if(typeof e.by=="string"){let d=e.by;return(o==null?void 0:o[d])===(r==null?void 0:r[d])}return e.by(o,r)},orientation:x(()=>e.horizontal?"horizontal":"vertical"),labelRef:l,buttonRef:t,optionsRef:f,disabled:x(()=>e.disabled),options:c,searchQuery:b,activeOptionIndex:m,activationTrigger:i,closeListbox(){e.disabled||u.value!==1&&(u.value=1,m.value=null)},openListbox(){e.disabled||u.value!==0&&(u.value=0)},goToOption(o,r,d){if(e.disabled||u.value===1)return;let p=v(),O=xe(o===y.Specific?{focus:y.Specific,id:r}:{focus:o},{resolveItems:()=>p.options,resolveActiveIndex:()=>p.activeOptionIndex,resolveId:I=>I.id,resolveDisabled:I=>I.dataRef.disabled});b.value="",m.value=O,i.value=d??1,c.value=p.options},search(o){if(e.disabled||u.value===1)return;let r=b.value!==""?0:1;b.value+=o.toLowerCase();let d=(m.value!==null?c.value.slice(m.value+r).concat(c.value.slice(0,m.value+r)):c.value).find(O=>O.dataRef.textValue.startsWith(b.value)&&!O.dataRef.disabled),p=d?c.value.indexOf(d):-1;p===-1||p===m.value||(m.value=p,i.value=1)},clearSearch(){e.disabled||u.value!==1&&b.value!==""&&(b.value="")},registerOption(o,r){let d=v(p=>[...p,{id:o,dataRef:r}]);c.value=d.options,m.value=d.activeOptionIndex},unregisterOption(o){let r=v(d=>{let p=d.findIndex(O=>O.id===o);return p!==-1&&d.splice(p,1),d});c.value=r.options,m.value=r.activeOptionIndex,i.value=1},theirOnChange(o){e.disabled||D(o)},select(o){e.disabled||D(F(R.value,{0:()=>o,1:()=>{let r=L(P.value.value).slice(),d=L(o),p=r.findIndex(O=>P.compare(d,L(O)));return p===-1?r.push(d):r.splice(p,1),r}}))}};ue([t,f],(o,r)=>{var d;P.closeListbox(),ie(r,re.Loose)||(o.preventDefault(),(d=h(t))==null||d.focus())},x(()=>u.value===0)),J(Y,P),le(x(()=>F(u.value,{0:B.Open,1:B.Closed})));let $=x(()=>{var o;return(o=h(t))==null?void 0:o.closest("form")});return V(()=>{K([$],()=>{if(!$.value||e.defaultValue===void 0)return;function o(){P.theirOnChange(e.defaultValue)}return $.value.addEventListener("reset",o),()=>{var r;(r=$.value)==null||r.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,modelValue:r,disabled:d,form:p,...O}=e,I={open:u.value===0,disabled:d,value:T.value};return N(Z,[...o!=null&&T.value!=null?Q({[o]:T.value}).map(([M,G])=>N(se,ae({features:ve.Hidden,key:M,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:p,disabled:d,name:M,value:G}))):[],E({ourProps:{},theirProps:{...a,...oe(O,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:I,slots:n,attrs:a,name:"Listbox"})])}}}),Fe=A({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:null}},setup(e,{attrs:n,slots:a}){var s;let u=(s=e.id)!=null?s:`headlessui-listbox-label-${j()}`,l=C("ListboxLabel");function t(){var f;(f=h(l.buttonRef))==null||f.focus({preventScroll:!0})}return()=>{let f={open:l.listboxState.value===0,disabled:l.disabled.value},{...c}=e,b={id:u,ref:l.labelRef,onClick:t};return E({ourProps:b,theirProps:c,slot:f,attrs:n,slots:a,name:"ListboxLabel"})}}}),Te=A({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:n,slots:a,expose:s}){var u;let l=(u=e.id)!=null?u:`headlessui-listbox-button-${j()}`,t=C("ListboxButton");s({el:t.buttonRef,$el:t.buttonRef});function f(i){switch(i.key){case g.Space:case g.Enter:case g.ArrowDown:i.preventDefault(),t.openListbox(),k(()=>{var v;(v=h(t.optionsRef))==null||v.focus({preventScroll:!0}),t.value.value||t.goToOption(y.First)});break;case g.ArrowUp:i.preventDefault(),t.openListbox(),k(()=>{var v;(v=h(t.optionsRef))==null||v.focus({preventScroll:!0}),t.value.value||t.goToOption(y.Last)});break}}function c(i){switch(i.key){case g.Space:i.preventDefault();break}}function b(i){t.disabled.value||(t.listboxState.value===0?(t.closeListbox(),k(()=>{var v;return(v=h(t.buttonRef))==null?void 0:v.focus({preventScroll:!0})})):(i.preventDefault(),t.openListbox(),Le(()=>{var v;return(v=h(t.optionsRef))==null?void 0:v.focus({preventScroll:!0})})))}let m=de(x(()=>({as:e.as,type:n.type})),t.buttonRef);return()=>{var i,v;let R={open:t.listboxState.value===0,disabled:t.disabled.value,value:t.value.value},{...w}=e,D={ref:t.buttonRef,id:l,type:m.value,"aria-haspopup":"listbox","aria-controls":(i=h(t.optionsRef))==null?void 0:i.id,"aria-expanded":t.listboxState.value===0,"aria-labelledby":t.labelRef.value?[(v=h(t.labelRef))==null?void 0:v.id,l].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:f,onKeyup:c,onClick:b};return E({ourProps:D,theirProps:w,slot:R,attrs:n,slots:a,name:"ListboxButton"})}}}),$e=A({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:n,slots:a,expose:s}){var u;let l=(u=e.id)!=null?u:`headlessui-listbox-options-${j()}`,t=C("ListboxOptions"),f=S(null);s({el:t.optionsRef,$el:t.optionsRef});function c(i){switch(f.value&&clearTimeout(f.value),i.key){case g.Space:if(t.searchQuery.value!=="")return i.preventDefault(),i.stopPropagation(),t.search(i.key);case g.Enter:if(i.preventDefault(),i.stopPropagation(),t.activeOptionIndex.value!==null){let v=t.options.value[t.activeOptionIndex.value];t.select(v.dataRef.value)}t.mode.value===0&&(t.closeListbox(),k(()=>{var v;return(v=h(t.buttonRef))==null?void 0:v.focus({preventScroll:!0})}));break;case F(t.orientation.value,{vertical:g.ArrowDown,horizontal:g.ArrowRight}):return i.preventDefault(),i.stopPropagation(),t.goToOption(y.Next);case F(t.orientation.value,{vertical:g.ArrowUp,horizontal:g.ArrowLeft}):return i.preventDefault(),i.stopPropagation(),t.goToOption(y.Previous);case g.Home:case g.PageUp:return i.preventDefault(),i.stopPropagation(),t.goToOption(y.First);case g.End:case g.PageDown:return i.preventDefault(),i.stopPropagation(),t.goToOption(y.Last);case g.Escape:i.preventDefault(),i.stopPropagation(),t.closeListbox(),k(()=>{var v;return(v=h(t.buttonRef))==null?void 0:v.focus({preventScroll:!0})});break;case g.Tab:i.preventDefault(),i.stopPropagation();break;default:i.key.length===1&&(t.search(i.key),f.value=setTimeout(()=>t.clearSearch(),350));break}}let b=ne(),m=x(()=>b!==null?(b.value&B.Open)===B.Open:t.listboxState.value===0);return()=>{var i,v;let R={open:t.listboxState.value===0},{...w}=e,D={"aria-activedescendant":t.activeOptionIndex.value===null||(i=t.options.value[t.activeOptionIndex.value])==null?void 0:i.id,"aria-multiselectable":t.mode.value===1?!0:void 0,"aria-labelledby":(v=h(t.buttonRef))==null?void 0:v.id,"aria-orientation":t.orientation.value,id:l,onKeydown:c,role:"listbox",tabIndex:0,ref:t.optionsRef};return E({ourProps:D,theirProps:w,slot:R,attrs:n,slots:a,features:z.RenderStrategy|z.Static,visible:m.value,name:"ListboxOptions"})}}}),Ie=A({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:n,attrs:a,expose:s}){var u;let l=(u=e.id)!=null?u:`headlessui-listbox-option-${j()}`,t=C("ListboxOption"),f=S(null);s({el:f,$el:f});let c=x(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===l:!1),b=x(()=>F(t.mode.value,{0:()=>t.compare(L(t.value.value),L(e.value)),1:()=>L(t.value.value).some(o=>t.compare(L(o),L(e.value)))})),m=x(()=>F(t.mode.value,{1:()=>{var o;let r=L(t.value.value);return((o=t.options.value.find(d=>r.some(p=>t.compare(L(p),L(d.dataRef.value)))))==null?void 0:o.id)===l},0:()=>b.value})),i=be(f),v=x(()=>({disabled:e.disabled,value:e.value,get textValue(){return i()},domRef:f}));V(()=>t.registerOption(l,v)),_(()=>t.unregisterOption(l)),V(()=>{K([t.listboxState,b],()=>{t.listboxState.value===0&&b.value&&F(t.mode.value,{1:()=>{m.value&&t.goToOption(y.Specific,l)},0:()=>{t.goToOption(y.Specific,l)}})},{immediate:!0})}),ee(()=>{t.listboxState.value===0&&c.value&&t.activationTrigger.value!==0&&k(()=>{var o,r;return(r=(o=h(f))==null?void 0:o.scrollIntoView)==null?void 0:r.call(o,{block:"nearest"})})});function R(o){if(e.disabled)return o.preventDefault();t.select(e.value),t.mode.value===0&&(t.closeListbox(),k(()=>{var r;return(r=h(t.buttonRef))==null?void 0:r.focus({preventScroll:!0})}))}function w(){if(e.disabled)return t.goToOption(y.Nothing);t.goToOption(y.Specific,l)}let D=me();function T(o){D.update(o)}function P(o){D.wasMoved(o)&&(e.disabled||c.value||t.goToOption(y.Specific,l,0))}function $(o){D.wasMoved(o)&&(e.disabled||c.value&&t.goToOption(y.Nothing))}return()=>{let{disabled:o}=e,r={active:c.value,selected:b.value,disabled:o},{value:d,disabled:p,...O}=e,I={id:l,ref:f,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":b.value,disabled:void 0,onClick:R,onFocus:w,onPointerenter:T,onMouseenter:T,onPointermove:P,onMousemove:P,onPointerleave:$,onMouseleave:$};return E({ourProps:I,theirProps:O,slot:r,attrs:a,slots:n,name:"ListboxOption"})}}});export{$e as A,Fe as E,Ie as F,Pe as I,Te as j};
